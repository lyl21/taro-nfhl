{"version":3,"file":"pages/userCenter/userCenter.js","sources":["webpack:///./src/pages/userCenter/userCenter.vue?b55b","webpack:///._src_pages_userCenter_userCenter.vue","webpack:///./src/pages/userCenter/userCenter.vue?5237","webpack:///./src/pages/userCenter/userCenter.vue?ea69","webpack:///./src/pages/userCenter/userCenter.vue?c1a9","webpack:///./src/pages/userCenter/userCenter.vue?2e72","webpack:///./src/pages/userCenter/userCenter.vue?bc23"],"sourcesContent":["import { render } from \"./userCenter.vue?vue&type=template&id=5478221b\"\nimport script from \"./userCenter.vue?vue&type=script&lang=js\"\nexport * from \"./userCenter.vue?vue&type=script&lang=js\"\n\nimport \"./userCenter.vue?vue&type=style&index=0&id=5478221b&lang=css\"\nscript.render = render\n/* hot reload */\nif (module.hot) {\n  script.__hmrId = \"5478221b\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('5478221b', script)) {\n    api.reload('5478221b', script)\n  }\n  \n  module.hot.accept(\"./userCenter.vue?vue&type=template&id=5478221b\", () => {\n    api.rerender('5478221b', render)\n  })\n\n}\n\nscript.__file = \"src/pages/userCenter/userCenter.vue\"\n\nexport default script","<template>\r\n  <view class=\"page_userCenter\">\r\n    <view class=\"page_userCenter_userInfo\">\r\n      <nut-avatar\r\n          v-if=\"!hasUserInfo\"\r\n          @tap=\"wxLogin\"\r\n          size=\"large\"\r\n          class=\"page_userCenter_avatar\"\r\n          icon=\"my2\"\r\n      />\r\n      <img\r\n          v-else\r\n          @tap=\"toPersonal\"\r\n          class=\"page_userCenter_avatar\"\r\n          alt=\"/assets/personal.png\"\r\n          v-bind:src=\"userInfo.avatarUrl\"\r\n      />\r\n      <text v-if=\"!hasUserInfo\" @tap=\"wxLogin\" class=\"page_userCenter_username\">\r\n        登录\r\n      </text>\r\n      <text v-else @tap=\"toPersonal\" class=\"page_userCenter_username\">\r\n        {{ userInfo.nickName }}\r\n      </text>\r\n    </view>\r\n\r\n    <!-- 轮播图-->\r\n    <view class=\"page_userCenter_banner\">\r\n      <swiper\r\n          indicator-color=\"#999\"\r\n          indicator-active-color=\"#333\"\r\n          :circular=\"true\"\r\n          :indicator-dots=\"true\"\r\n          :autoplay=\"true\"\r\n      >\r\n        <swiper-item v-for=\"(item, index) in bannerList\" :key=\"index\">\r\n          <img class=\"page_userCenter_banner_imgs\" :src=\"item\"/>\r\n        </swiper-item>\r\n      </swiper>\r\n    </view>\r\n\r\n    <view class=\"page_userCenter_tag\">\r\n      <view v-if=\"!hasUserInfo\" @tap=\"wxLogin\">\r\n        <nut-icon class=\"page_userCenter_tag_img\" name=\"my2\" size=\"24\"></nut-icon>\r\n        <br/>\r\n        <text>个人资料</text>\r\n      </view>\r\n      <view v-else @tap=\"toPersonal\">\r\n        <nut-icon class=\"page_userCenter_tag_img\" name=\"my2\" size=\"24\"></nut-icon>\r\n        <br/>\r\n        <text>个人资料</text>\r\n      </view>\r\n      <view @tap=\"toLocation\" >\r\n        <nut-icon class=\"page_userCenter_tag_img\" name=\"location2\" size=\"24\"></nut-icon>\r\n        <br/>\r\n        <text>导航到店</text>\r\n      </view>\r\n      <view  @tap=\"toFeedback\" >\r\n        <nut-icon class=\"page_userCenter_tag_img\" name=\"edit\" size=\"24\"></nut-icon>\r\n        <br/>\r\n        <button class=\"page_userCenter_tag_img_btn\"  openType=\"feedback\"   >意见反馈</button>\r\n      </view>\r\n      <view @tap=\"toCallUs\">\r\n        <nut-icon class=\"page_userCenter_tag_img\" name=\"service\" size=\"24\"></nut-icon>\r\n        <br/>\r\n        <text>联系我们</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport Taro from '@tarojs/taro'\r\n//获取位置\r\nlet QQMapWX = require('../../../sdk/qqmap-wx-jssdk');\r\nlet qqmap;\r\n\r\nexport default {\r\n  name: \"index\",\r\n  data() {\r\n    return {\r\n      userInfo: {},\r\n      hasUserInfo: false,\r\n      showFeedBack:false,\r\n      //轮播图数据\r\n      bannerList: [\r\n        \"https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00326-2506.jpg\",\r\n        \"https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00705-482.jpg\",\r\n        \"https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00792-1860.jpg\",\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    qqmap = new QQMapWX({\r\n      key: 'Q4ZBZ-7QTK2-52JUS-CSHSV-4IZDO-IFFY6'\r\n    });\r\n  },\r\n  onShow(){\r\n    Taro.showShareMenu({\r\n      withShareTicket: true,\r\n    })\r\n  },\r\n  methods: {\r\n    //wx授权登录\r\n    wxLogin() {\r\n\r\n      // //检测sessionkey\r\n      // Taro.checkSession({\r\n      //   success: function () {\r\n      //     //session_key 未过期，并且在本生命周期一直有效\r\n      //     console.log(\"session_key 未过期\")\r\n      //   },\r\n      //   fail: function () {\r\n      //     // session_key 已经失效，需要重新执行登录流程\r\n      //     console.log(\"session_key 已经失效，需要重新执行登录流程\")\r\n      //清除缓存\r\n      // Taro.clearStorageSync()\r\n      Taro.showLoading({\r\n        title: \"加载中...\"\r\n      })\r\n      // 登录\r\n      Taro.getUserProfile({\r\n        desc: '用于完善会员资料', // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\r\n        success: (getUserProfile_res) => {\r\n          Taro.hideLoading()\r\n          //获取用户信息并保存\r\n          Taro.setStorage({\r\n            key  :\"userInfo\",\r\n            data :getUserProfile_res.userInfo\r\n          })\r\n          this.userInfo=getUserProfile_res.userInfo\r\n          //使用用户信息进行登录操作\r\n          Taro.showLoading({\r\n            title: \"登录中...\"\r\n          })\r\n          Taro.login({\r\n            success: (login_res) => {\r\n              if (login_res.code) {\r\n                //发起网络请求获取用户openId\r\n              Taro.hideLoading()\r\n                this.hasUserInfo=true\r\n              } else {\r\n                console.log('登录失败！' + login_res.errMsg)\r\n              }\r\n            },\r\n            fail(login_res) {\r\n              Taro.showToast({\r\n                title: '服务器错误,登陆失败',\r\n                icon: 'none'\r\n              })\r\n            }\r\n          })\r\n        },\r\n        fail() {\r\n          Taro.hideLoading()\r\n          Taro.showToast({\r\n            title: '获取用户授权失败',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      })\r\n      // }\r\n      // })\r\n\r\n    },\r\n    //跳个人资料\r\n    toPersonal() {\r\n      Taro.navigateTo({\r\n        url: \"/pages/personal/personal\",\r\n      });\r\n    },\r\n    //导航到店\r\n    toLocation() {\r\n      // 可以通过 Taro.getSetting 先查询一下用户是否授权了 \"scope.record\" 这个 scope\r\n      Taro.getSetting({\r\n        success: function (res) {\r\n          if (!res.authSetting['scope.userLocation']) {\r\n            Taro.authorize({\r\n              scope: 'scope.userLocation',\r\n              success: function () {\r\n                // 用户已经同意小程序使用录音功能，后续调用 Taro.startRecord 接口不会弹窗询问\r\n                Taro.requirePlugin('routePlan');\r\n                let referer = 'nfhl'; //调用插件的小程序的名称\r\n                let endPoint = JSON.stringify({ //终点\r\n                  'name': '安心地板',\r\n                  'lat': 34.405575, //目的地的定位\r\n                  'lng': 113.725405 //目的地的定位\r\n                });\r\n                Taro.navigateTo({\r\n                  //跳转实时地图\r\n                  url: 'plugin://routePlan/route-plan?key=' + qqmap.key + '&referer=' + referer + '&endPoint=' +\r\n                      endPoint\r\n                })\r\n              },\r\n              fail: function() {\r\n                Taro.openSetting({\r\n                  success(res) {\r\n                    console.log(res.authSetting)\r\n                  }\r\n                })\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n\r\n    },\r\n    //意见反馈\r\n    toFeedback() {\r\n    //todo  js调用按钮点击事件\r\n      // 在 H5 端使用 ref 获取基础组件的 DOM 节点，现在只能得到适配层的 Vue 组件实例，而不是对应的 webComponent 根节点。\r\n      // 在 Vue2 里可以通过修改父元素的 refs 属性实现，但 Vue3 中组件间初始化顺序有变化，因此暂时不能支持.\r\n\r\n    },\r\n\r\n    //联系我们\r\n    toCallUs() {\r\n      Taro.makePhoneCall({\r\n        phoneNumber: \"19913832126\", //仅为示例，并非真实的电话号码\r\n      });\r\n    },\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style>\r\n.page_userCenter {\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.page_userCenter_userInfo {\r\n  position: relative;\r\n  margin-top: 30px;\r\n}\r\n\r\n.page_userCenter_avatar {\r\n  margin: auto;\r\n  width: 45px;\r\n  height: 45px;\r\n  border-radius: 50%\r\n}\r\n\r\n.page_userCenter_username {\r\n  /*font-size: 16px;*/\r\n  float: left;\r\n  position: absolute;\r\n  margin-left: 20px;\r\n  margin-top: 15px;\r\n  font-weight: bold;\r\n}\r\n\r\n.page_userCenter_banner {\r\n  margin-top: 20px;\r\n  overflow: hidden;\r\n  border-radius: 5px;\r\n  text-align: center;\r\n  width: 100%;\r\n}\r\n\r\n.page_userCenter_banner_imgs {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.page_userCenter_tag {\r\n  width: 100%;\r\n  margin-top: 30px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  font-size: 16px;\r\n}\r\n\r\n.page_userCenter_tag_img {\r\n  margin-left: 20px;\r\n}\r\n\r\n.page_userCenter_tag_img_btn{\r\n  margin:0;\r\n  padding: 0;\r\n  outline: none;\r\n  border: none;\r\n  border-radius:0;\r\n  background-color: transparent;\r\n  line-height: inherit;\r\n  width: max-content;\r\n  height: max-content;\r\n}\r\n.page_userCenter_tag_img_btn:after{\r\n  border: none;\r\n}\r\n</style>","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./userCenter.vue\"\nvar config = {\"navigationBarTitleText\":\"我的\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/userCenter/userCenter', {root:{cn:[]}}, config || {}))\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./userCenter.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./userCenter.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/@tarojs/mini-runner/node_modules/css-loader/dist/cjs.js??ref--4-oneOf-1-1!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/@tarojs/mini-runner/node_modules/postcss-loader/dist/cjs.js??ref--4-oneOf-1-2!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./userCenter.vue?vue&type=style&index=0&id=5478221b&lang=css\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/templateLoader.js??ref--6!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./userCenter.vue?vue&type=template&id=5478221b\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAYA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACgDA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAWA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAfA;AAiBA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAtCA;AAyCA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAJA;AAKA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAvBA;AAyBA;AACA;AA7BA;AAgCA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAGA;AAtHA;AAzBA;;;;;;;;;;;;;;;;;;AA3EA;;;AACA;;;;AAwBA;;;AAEA;AACA;AACA;AACA;AACA;;;;AAQA;;;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AAhEA;AAQA;AAJA;AACA;AACA;AACA;AACA;;AANA;AAaA;AAJA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AANA;AASA;AAFA;AAAA;AAAA;AAAA;AAEA;AAAA;AAFA;AAKA;AAFA;AAAA;AAAA;AAAA;AAEA;AADA;AADA;AAcA;AAAA;AAEA;AADA;AAAA;AAAA;;AAAA;AACA;;AAFA;AAWA;AAJA;AAAA;AAAA;AAIA;AAHA;AAAA;AAAA;AAAA;;AADA;AASA;AAJA;AAAA;AAAA;AAIA;AAHA;AAAA;AAAA;AAAA;;AADA;AAKA;AAAA;AAAA;AAIA;AAHA;AAAA;AAAA;AAAA;;AADA;AAKA;AAAA;AAAA;AAIA;AAHA;AAAA;AAAA;AAAA;;AADA;AAKA;AAAA;AAAA;AAIA;AAHA;AAAA;AAAA;AAAA;;AADA;;;;;;;;;;;;AC7DA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;A","sourceRoot":""}