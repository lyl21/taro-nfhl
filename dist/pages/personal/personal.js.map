{"version":3,"file":"pages/personal/personal.js","sources":["webpack:///./src/pages/personal/personal.vue?6139","webpack:///._src_pages_personal_personal.vue","webpack:///./src/pages/personal/personal.vue?03e8","webpack:///./src/pages/personal/personal.vue?6e71","webpack:///./src/pages/personal/personal.vue?8e8d","webpack:///./src/pages/personal/personal.vue?b3ed","webpack:///./src/pages/personal/personal.vue?86e5"],"sourcesContent":["import { render } from \"./personal.vue?vue&type=template&id=6bdac3db\"\nimport script from \"./personal.vue?vue&type=script&lang=js\"\nexport * from \"./personal.vue?vue&type=script&lang=js\"\n\nimport \"./personal.vue?vue&type=style&index=0&id=6bdac3db&lang=css\"\nscript.render = render\n/* hot reload */\nif (module.hot) {\n  script.__hmrId = \"6bdac3db\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('6bdac3db', script)) {\n    api.reload('6bdac3db', script)\n  }\n  \n  module.hot.accept(\"./personal.vue?vue&type=template&id=6bdac3db\", () => {\n    api.rerender('6bdac3db', render)\n  })\n\n}\n\nscript.__file = \"src/pages/personal/personal.vue\"\n\nexport default script","<template>\r\n  <view class=\"page_personal\">\r\n    <!--    头像-->\r\n    <view class=\"page_personal_avatar\">\r\n      <img\r\n          class=\"page_personal_avatar_info\"\r\n          alt=\"/assets/personal.png\"\r\n          v-bind:src=\"userInfo.avatarUrl\"\r\n      />\r\n    </view>\r\n\r\n\r\n    <nut-cell-group>\r\n      <nut-cell title=\"昵称\" icon=\"my2\" v-bind:desc=\"userInfo.nickName\" is-link=\"true\"/>\r\n      <nut-cell title=\"性别\" icon=\"eye\" v-bind:desc=\"sex\" is-link=\"true\"/>\r\n      <nut-cell title=\"城市\" icon=\"location2\" v-bind:desc=\"area\" @tap=\"editUserLocation\" is-link=\"true\"/>\r\n    </nut-cell-group>\r\n\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport Taro from '@tarojs/taro'\r\n//获取位置\r\nlet QQMapWX = require('../../../sdk/qqmap-wx-jssdk');\r\nlet qqmap;\r\n\r\nexport default {\r\n  name: \"index\",\r\n  data() {\r\n    return {\r\n      //gender -0未知-1男,2女\r\n      sex: \"\",\r\n      area: \"\",\r\n      userInfo: {},\r\n      //轮播图数据\r\n      bannerList: [\r\n        \"https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00326-2506.jpg\",\r\n        \"https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00705-482.jpg\",\r\n        \"https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00792-1860.jpg\",\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    onShareAppMessage() {\r\n      return {\r\n        title: 'nfhl', //转发页面的标题\r\n        path: '/pages/userCenter/userCenter'   //转发页面的路径以及携带的参数\r\n      }\r\n    },\r\n    editUserLocation() {\r\n      let _this = this\r\n\r\n      Taro.getStorage({\r\n        key: 'userInfo_area',\r\n        success: function (res) {\r\n          console.log(res.data)\r\n          _this.area = res.data\r\n        }, fail: function (res) {\r\n          // 可以通过 Taro.getSetting 先查询一下用户是否授权了 \"scope.record\" 这个 scope\r\n          Taro.getSetting({\r\n            success: function (res) {\r\n              if (!res.authSetting['scope.userLocation']) {\r\n                Taro.authorize({\r\n                  scope: 'scope.userLocation',\r\n                  success: function () {\r\n                    Taro.getLocation({\r\n                      type: 'wgs84', //返回可以用于 Taro.openLocation的经纬度\r\n                      success: function (res) {\r\n                        const latitude = res.latitude\r\n                        const longitude = res.longitude\r\n                        //逆地址解析,通过经纬度获取位置等信息\r\n                        qqmap.reverseGeocoder({\r\n                          location: {latitude, longitude},\r\n                          success: function (res) {\r\n                            // 获取当前城市\r\n                            console.log(res.result.address);\r\n                            Taro.setStorage({\r\n                              key: \"userInfo_area\",\r\n                              data: res.result.address\r\n                            })\r\n                            _this.area = res.result.address\r\n                          }\r\n                        })\r\n                      }\r\n                    })\r\n                  },\r\n                  fail: function () {\r\n                    Taro.showModal({\r\n                      title: '权限',\r\n                      content: '请允许获取您的位置',\r\n                      confirmText: '去授权',\r\n                      success(res) {\r\n                        if (res.confirm) {\r\n                          Taro.openSetting({\r\n                            success(res) {\r\n                              console.log(res.authSetting)\r\n                            }\r\n                          })\r\n                        } else {\r\n                          console.log('请求位置权限失败');\r\n                        }\r\n                      }\r\n                    })\r\n                  }\r\n                })\r\n              } else {\r\n                //用户已授权，但是获取地理位置失败，提示用户去系统设置中打开定位\r\n                Taro.showModal({\r\n                  title: '权限',\r\n                  content: '请在系统设置中打开定位服务',\r\n                  confirmText: '确定'\r\n                })\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n\r\n    },\r\n  },\r\n  created() {\r\n    // 建议在页面初始化时把 getCurrentInstance() 的结果保存下来供后面使用，\r\n    // 而不是频繁地调用此 API\r\n    this.$instance = Taro.getCurrentInstance()\r\n\r\n    qqmap = new QQMapWX({\r\n      key: 'Q4ZBZ-7QTK2-52JUS-CSHSV-4IZDO-IFFY6'\r\n    });\r\n  },\r\n  // 可以使用所有的 Vue 生命周期方法\r\n  mounted() {\r\n    // 获取路由参数\r\n    // console.log(this.$instance.router.params.openId) // 输出 { id: 2, type: 'test' }\r\n  },\r\n  // onLoad\r\n  onLoad() {\r\n    let _this = this\r\n    Taro.getStorage({\r\n      key: 'userInfo',\r\n      success: function (res) {\r\n        console.log(res.data)\r\n        _this.userInfo = res.data\r\n        //gender    0-未知-1男,2女\r\n        if (_this.userInfo.gender===1) {\r\n          _this.sex = \"男\"\r\n        } else if (_this.userInfo.gender===2) {\r\n          _this.sex = \"女\"\r\n        } else {\r\n          _this.sex = \"未知\"\r\n        }\r\n        if (_this.userInfo.province + _this.userInfo.city===\"\") {\r\n          _this.area = \"未定位\"\r\n        } else {\r\n          _this.area = _this.userInfo.province + _this.userInfo.city\r\n        }\r\n      },\r\n      fail: function (res) {\r\n        //获取用户信息失败\r\n        Taro.showToast({\r\n          title: \"获取用户信息失败\",\r\n          icon: \"none\"\r\n        })\r\n        setTimeout({}, 2000)\r\n        //返回上页\r\n        Taro.navigateBack({\r\n          delta: \"1\"\r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n  // onReady\r\n  onReady() {\r\n  },\r\n\r\n  // 对应 onShow\r\n  onShow() {\r\n    Taro.showShareMenu({\r\n      withShareTicket: true,\r\n    })\r\n  },\r\n\r\n  // 对应 onHide\r\n  onHide() {\r\n  },\r\n\r\n  // 对应 onPullDownRefresh\r\n  onPullDownRefresh() {\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style>\r\n.page_personal {\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.page_personal_avatar {\r\n  position: relative;\r\n  margin-top: 30px;\r\n  text-align: center;\r\n}\r\n\r\n.page_personal_avatar_info {\r\n  width: 75px;\r\n  height: 75px;\r\n  border-radius: 50%\r\n}\r\n\r\n</style>","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./personal.vue\"\nvar config = {\"navigationBarTitleText\":\"个人资料\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/personal/personal', {root:{cn:[]}}, config || {}))\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./personal.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./personal.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/@tarojs/mini-runner/node_modules/css-loader/dist/cjs.js??ref--4-oneOf-1-1!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/@tarojs/mini-runner/node_modules/postcss-loader/dist/cjs.js??ref--4-oneOf-1-2!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./personal.vue?vue&type=style&index=0&id=6bdac3db&lang=css\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/templateLoader.js??ref--6!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./personal.vue?vue&type=template&id=6bdac3db\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAYA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAYA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAVA;AAYA;AAlBA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAdA;AAgBA;AAzCA;AA2CA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAtDA;AAwDA;AA/DA;AAmEA;AA7EA;AA+EA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AADA;AAGA;AA9BA;AAgCA;AAEA;AACA;AAGA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAGA;AACA;AAlKA;;;;;;;;;;;;;;;;;AA3BA;;;AAEA;;;;;;;;AAFA;AAIA;AACA;AACA;AACA;;AAJA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAFA;;;;AAGA;;;;;;;;;;;;AChBA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;A","sourceRoot":""}